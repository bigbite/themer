(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.wp.plugins,a=window.wp.domReady;var r=e.n(a);const l=window.lodash,o=window.wp.components,i=window.wp.data,s=({color:e,elements:n,font:a})=>(0,t.createElement)("div",{className:"themerPreviewSquare",style:{backgroundColor:`${e?.background}`}},(0,t.createElement)("h1",{className:"themerPreviewTitle",style:{color:`${e?.text}`,"font-family":`${n?.h1?.typography?.fontFamily}`,"font-size":`${n?.h1?.typography?.fontSize}`,"line-height":`${a?.lineHeight}`}},"This is a title"),(0,t.createElement)("div",{className:"themerPreviewText",style:{color:`${e?.text}`,"font-family":`${a?.fontFamily}`,"font-size":`${a?.fontSize}`,"line-height":`${a?.lineHeight}`}},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,"),(0,t.createElement)("div",{className:"themerPreviewColours"},(0,t.createElement)("div",{className:"themerPreviewCircle"}),(0,t.createElement)("div",{className:"themerPreviewCircle"}))),c=({data:e,id:n,value:a,onChange:r})=>{const l=()=>{const t=e?.settings?.typography?.fontSizes?.theme;return t},i=()=>{const t=e?.settings?.typography?.fontFamilies?.theme,n=[];return t.forEach((e=>{e.slug=e.slug.replace(/\s+/g,"-"),n.push({value:e.slug,label:e.name})})),n},s=(e,t)=>{let n;n="minus"===t?-.1:.1;const a=parseFloat(e);return parseFloat(a+n).toFixed(1).toString()};switch(n){case"fontSize":return(0,t.createElement)(o.FontSizePicker,{fontSizes:l(),value:a,onChange:e=>r(e)});case"fontFamily":return(0,t.createElement)(o.SelectControl,{options:i(),value:a,onChange:e=>r(e)});case"lineHeight":return(0,t.createElement)(o.__experimentalInputControl,{value:a,onChange:e=>r(e),suffix:(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.Button,{text:"+",onClick:()=>{r(s(a,"plus"))}}),(0,t.createElement)(o.Button,{text:"-",onClick:()=>{r(s(a,"minus"))}}))});case"textDecoration":return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.__experimentalToggleGroupControl,{onChange:e=>{r(e)}},(0,t.createElement)(o.__experimentalToggleGroupControlOptionIcon,{value:"none",label:"none",icon:"minus"}),(0,t.createElement)(o.__experimentalToggleGroupControlOptionIcon,{value:"underline",label:"Underline",icon:"editor-underline"}),(0,t.createElement)(o.__experimentalToggleGroupControlOptionIcon,{value:"line-through",label:"Strikethrough",icon:"editor-strikethrough"})));default:return null}},m=({value:e,onChange:n,data:a})=>{const[r,l]=(0,t.useState)(isNaN(Array.from(e)[0])),i=e=>{const t=a?.settings?.spacing?.spacingSizes?.theme,n=[];return t.forEach((e=>{n.push({value:e.size,label:e.name})})),e?n[e].value:n};return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.Button,{icon:"menu",onClick:()=>l(!r),isPressed:!r}),r&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.RangeControl,{min:1,max:i().length-1,marks:i,onChange:e=>n(i(e))})),!r&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.__experimentalUnitControl,{value:e,onChange:e=>{n(e)}})))},u=({label:e,value:n,onChange:a,data:r})=>{const l=["fontFamily","fontSize","lineHeight","textDecoration"],i=["blockGap","top","right","bottom","left"];switch(!0){case["background","text"].includes(e):return(0,t.createElement)(o.ColorPicker,{defaultValue:n,onChange:e=>a(e)});case l.includes(e):return(0,t.createElement)("div",{className:"themer-nav-fontpicker"},(0,t.createElement)(c,{id:e,value:n,onChange:e=>a(e),data:r}));case i.includes(e):return(0,t.createElement)(m,{id:e,value:n,onChange:e=>a(e),data:r});default:return(0,t.createElement)(o.TextControl,{value:n,onChange:e=>a(e)})}},d=({value:e,parent:n,id:a,data:r})=>{const o=()=>(0,i.select)("core").__experimentalGetCurrentGlobalStylesId(),[s,c]=(0,t.useState)(e),m={};return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"themer-nav-item"},a),(0,t.createElement)(u,{label:a,value:s||e,onChange:e=>(e=>{let t=`${n}.${a}`;"."===t.charAt(0)&&(t=t.substring(1)),c(e),((e,t)=>{const n={...(0,i.select)("core").getEditedEntityRecord("root","globalStyles",o())},a=(0,l.set)(m,e,t),r=(0,l.merge)(n,a);(0,i.dispatch)("core").editEntityRecord("root","globalStyles",o(),{styles:r.styles||{},settings:r.settings||{}})})(t,e)})(e),parent:n,data:r}))},g=()=>{const[e,n]=(0,t.useState)(),a=()=>(0,i.select)("core").__experimentalGetCurrentGlobalStylesId(),r=()=>(0,i.select)("core").__experimentalGetCurrentThemeBaseGlobalStyles(),c=()=>(0,i.select)("core").getEditedEntityRecord("root","globalStyles",a()),m=r(),u=c();(0,i.subscribe)((()=>{const e=c();u!==e&&n(e)}));const g=(e,n="",a)=>Object.entries(e).map((([e,r])=>{if("object"==typeof r&&null!==r){const l=`${n}.${e}`;return(0,t.createElement)("div",{className:`themer-nav-${a}`},(0,t.createElement)(o.__experimentalNavigatorProvider,{initialPath:"/"},(0,t.createElement)(o.__experimentalNavigatorScreen,{path:"/"},(0,t.createElement)(o.__experimentalNavigatorButton,{className:"themer-nav-item",path:`/${e}`},e)),(0,t.createElement)(o.__experimentalNavigatorScreen,{path:`/${e}`},(0,t.createElement)("span",{className:"nav-top"},(0,t.createElement)(o.__experimentalNavigatorToParentButton,null,"<"),(0,t.createElement)("p",{className:"themer-nav-title"},e)),g(r,l,"child"))))}if("string"==typeof r){const a=n;return(0,t.createElement)(d,{parent:a,id:e,value:r,data:{settings:m?.settings}})}return r}));return(0,l.isEmpty)(e)?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.Spinner,null)):(0,t.createElement)("div",{className:"themer-container"},(0,t.createElement)("div",{className:"themer-preview-container"},(0,t.createElement)(s,{color:u?.styles?.color,font:u?.styles?.typography,elements:u?.styles?.elements})),(0,t.createElement)("div",{className:"themer-nav-container"},g((()=>{if(!u)return{};var e,t;return e={styles:m?.styles,settings:(({layout:e})=>({layout:e}))(m?.settings)},t={styles:u?.styles,settings:(({layout:e})=>({layout:e}))(u?.settings)},(0,l.mergeWith)({},e,t)})(),"","parent"),(0,t.createElement)(o.Button,{isPrimary:!0,onClick:()=>(async()=>{(0,i.dispatch)("core").undo();try{await(0,i.dispatch)("core").saveEditedEntityRecord("root","globalStyles",a())}catch(e){console.log(e)}})(),text:"Save to db"}),(0,t.createElement)(o.Button,{isPrimary:!0,onClick:()=>{(0,i.dispatch)("core").editEntityRecord("root","globalStyles",a(),r())},text:"reset to theme.json"})))},p=()=>(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"App"},(0,t.createElement)(g,null)));r()((()=>{(0,n.registerPlugin)("big-bite-themer",{icon:"editor-paragraph",render:p}),(0,t.render)((0,t.createElement)(p,null),document.getElementById("themer-admin-screen"))}))})();